#!/usr/bin/env bash

# Pre-commit Hook - Enforces Code Quality Standards
# This hook runs automatically before each commit

echo "ğŸ” Running pre-commit checks..."

# 1. Run ESLint
echo "ğŸ“‹ Checking code style with ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ESLint found errors. Please fix them before committing."
  echo "ğŸ’¡ Tip: Run 'npm run lint:fix' to auto-fix some issues"
  exit 1
fi

# 2. Run Prettier
echo "âœ¨ Checking code formatting with Prettier..."
npm run format:check
if [ $? -ne 0 ]; then
  echo "âŒ Code formatting issues found."
  echo "ğŸ’¡ Tip: Run 'npm run format' to auto-format files"
  exit 1
fi

# 3. Run tests
echo "ğŸ§ª Running tests..."
npm run test
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Please fix failing tests before committing."
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
exit 0
